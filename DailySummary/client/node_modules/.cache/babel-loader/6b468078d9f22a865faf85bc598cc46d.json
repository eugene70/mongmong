{"ast":null,"code":"import \"antd/es/layout/style\";\nimport _Layout from \"antd/es/layout\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nvar _jsxFileName = \"E:\\\\mongmong\\\\DailySummary\\\\client\\\\src\\\\components\\\\Login\\\\Login.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { Link, withRouter } from 'react-router-dom';\nimport { LoginContext } from '../../contexts/login';\n\nconst config = require('../../config');\n\nclass NormalLoginForm extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isLogined: localStorage.getItem('token') ? true : false\n    };\n\n    this.login = (email, password) => {\n      axios.post(config.serverUrl + '/api/login', {\n        user_email: email,\n        user_password: password\n      }).then(res => {\n        console.log(this.isLogined);\n        localStorage.setItem(\"token\", res.data.token); // this.setState({\n        //   isLogined: true\n        // })\n\n        if (this.state.isLogined == true) {\n          this.props.history.push(\"/post/write\");\n        } // this.setState({\n        //   isLogined: this.state\n        //   // setIsLogined : this.setIsLogined\n        // }) \n        // console.log(this.setIsLogined)\n        // // this.props.setIsLogined(true);\n\n      }).catch(error => {\n        if (error.response) {\n          alert(error.response.status + \": \" + error.response.data.message);\n        } else {\n          alert(error);\n        }\n      });\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      this.props.form.validateFields((err, values) => {\n        console.log(values);\n\n        if (!err) {\n          const mail = values.mail,\n                password = values.password;\n          this.login(mail, password);\n        }\n      });\n    };\n  }\n\n  render() {\n    const getFieldDecorator = this.props.form.getFieldDecorator;\n    return React.createElement(React.Fragment, null, React.createElement(_Layout, {\n      className: \"one-login flex flex-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(_Form, {\n      onSubmit: this.handleSubmit,\n      className: \"login-form\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(_Form.Item, {\n      className: \"one-input one-input-email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, getFieldDecorator('mail', {\n      rules: [{\n        required: true,\n        message: '이메일 주소를 입력해주세요!'\n      }]\n    })(React.createElement(_Input, {\n      prefix: React.createElement(_Icon, {\n        type: \"mail\",\n        style: {\n          color: 'rgba(0,0,0,.25)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }),\n      placeholder: \"\\uC774\\uBA54\\uC77C\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      className: \"one-input one-input-pw\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, getFieldDecorator('password', {\n      rules: [{\n        required: true,\n        message: '비밀번호를 입력해주세요.!'\n      }]\n    })(React.createElement(_Input, {\n      prefix: React.createElement(_Icon, {\n        type: \"lock\",\n        style: {\n          color: 'rgba(0,0,0,.25)'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }),\n      type: \"password\",\n      placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }))), React.createElement(_Form.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      className: \"login-form-button\",\n      block: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"\\uB85C\\uADF8\\uC778\"), React.createElement(\"div\", {\n      className: \"shortcut flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/signup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, \"\\uD68C\\uC6D0\\uAC00\\uC785\"))))));\n  }\n\n}\n\nconst WrappedNormalLoginForm = _Form.create({\n  name: 'normal_login'\n})(NormalLoginForm);\n\nconst LoginContainer = () => React.createElement(LoginContext.Consumer, {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 101\n  },\n  __self: this\n}, ({\n  login\n}) => React.createElement(WrappedNormalLoginForm, {\n  setIsLogined: login,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 104\n  },\n  __self: this\n}));\n\nexport default withRouter(WrappedNormalLoginForm);","map":{"version":3,"sources":["E:/mongmong/DailySummary/client/src/components/Login/Login.js"],"names":["React","Component","axios","Link","withRouter","LoginContext","config","require","NormalLoginForm","state","isLogined","localStorage","getItem","login","email","password","post","serverUrl","user_email","user_password","then","res","console","log","setItem","data","token","props","history","push","catch","error","response","alert","status","message","handleSubmit","e","preventDefault","form","validateFields","err","values","mail","render","getFieldDecorator","rules","required","color","WrappedNormalLoginForm","create","name","LoginContainer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios';\r\nimport { Layout, Form, Icon, Input, Button } from 'antd'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport { LoginContext } from '../../contexts/login';\r\n\r\nconst config = require('../../config');\r\n\r\nclass NormalLoginForm extends Component {\r\n\r\n  state = {    \r\n    isLogined: localStorage.getItem('token') ? true : false,\r\n  }\r\n  \r\n//   shouldComponentUpdate(nextProps, nextState){\r\n//     console.log(\"shouldComponentUpdate: \" + JSON.stringify(nextProps) + \" \" + JSON.stringify(nextState));\r\n//     return true;\r\n// }\r\n\r\n  login = (email, password) => {\r\n    axios.post(config.serverUrl + '/api/login', {\r\n      user_email: email,\r\n      user_password: password,\r\n    }).then(res => {\r\n      console.log(this.isLogined)\r\n      localStorage.setItem(\"token\", res.data.token);\r\n      // this.setState({\r\n      //   isLogined: true\r\n      // })\r\n      if(this.state.isLogined == true) {\r\n        this.props.history.push(\"/post/write\");\r\n      }\r\n      // this.setState({\r\n      //   isLogined: this.state\r\n      //   // setIsLogined : this.setIsLogined\r\n      // }) \r\n      // console.log(this.setIsLogined)\r\n      // // this.props.setIsLogined(true);\r\n\r\n    }).catch((error) => {\r\n      if (error.response) {\r\n        alert(error.response.status + \": \" + \r\n              error.response.data.message);\r\n      } else {\r\n        alert(error);\r\n      }\r\n    })\r\n  }\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    this.props.form.validateFields((err, values) => {\r\n      console.log(values)\r\n      if (!err) {\r\n        const { mail, password } = values\r\n        this.login(mail, password)\r\n      }   \r\n    });\r\n  };\r\n\r\n  \r\n\r\n  render() {\r\n  const { getFieldDecorator } = this.props.form\r\n    return (\r\n      <>\r\n      <Layout className=\"one-login flex flex-center\">\r\n          <Form onSubmit={this.handleSubmit} className=\"login-form\">\r\n            <Form.Item className=\"one-input one-input-email\">\r\n              {getFieldDecorator('mail', {\r\n                rules: [{ required: true, message: '이메일 주소를 입력해주세요!' }],\r\n              })(\r\n            <Input prefix={<Icon type=\"mail\" style={{ color: 'rgba(0,0,0,.25)' }} />} placeholder=\"이메일\" />,\r\n              )}\r\n            </Form.Item>\r\n            <Form.Item className=\"one-input one-input-pw\">\r\n              {getFieldDecorator('password', {\r\n                rules: [{ required: true, message: '비밀번호를 입력해주세요.!' }],\r\n              })(\r\n                <Input prefix={<Icon type=\"lock\" style={{ color: 'rgba(0,0,0,.25)' }} />} type=\"password\" placeholder=\"비밀번호\" />,\r\n              )}\r\n            </Form.Item>\r\n            <Form.Item>\r\n              <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" block>\r\n                로그인\r\n              </Button>\r\n              <div className=\"shortcut flex\">\r\n                <Link to=\"/signup\">회원가입</Link>\r\n              </div>\r\n            </Form.Item>\r\n          </Form>\r\n        </Layout>      \r\n      </>  \r\n    )\r\n  }\r\n}\r\n\r\nconst WrappedNormalLoginForm = Form.create({ name: 'normal_login' })(NormalLoginForm);\r\n\r\nconst LoginContainer = () => (\r\n  <LoginContext.Consumer>\r\n   {\r\n     ({login}) => \r\n     <WrappedNormalLoginForm setIsLogined={login} />\r\n   }\r\n  </LoginContext.Consumer>\r\n);\r\n\r\nexport default withRouter(WrappedNormalLoginForm);"]},"metadata":{},"sourceType":"module"}